<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nel Ar Condicionados</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Ícones da Lucide React (para os ícones) -->
    <script src="https://unpkg.com/lucide-react@latest"></script>
    <!-- Fontes do Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f7fa;
            color: #1e3a8a;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .product-card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease-in-out;
            background-color: white;
            border-radius: 1rem;
        }
        .product-card:hover {
            transform: translateY(-5px);
            cursor: pointer;
        }
        .lucide {
            display: inline-block;
            vertical-align: middle;
            stroke-width: 2;
        }
        /* Estilos para a caixa de mensagem, para não usar alert() */
        .message-box {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #1e40af;
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            animation: fadeIn 0.5s, fadeOut 0.5s 2.5s forwards;
            display: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .hidden {
            display: none !important;
        }

        /* Estilos para as estrelas de avaliação */
        .star-rating .star {
            cursor: pointer;
            fill: #d1d5db; /* Cor cinza padrão */
            transition: fill 0.2s;
        }

        .star-rating .star.filled {
            fill: #f59e0b; /* Cor laranja para estrelas preenchidas */
        }
    </style>
</head>
<body>
    <!-- Message Box -->
    <div id="message-box" class="message-box"></div>

    <!-- Header e Navegação -->
    <header class="bg-blue-600 sticky top-0 z-50 shadow-md">
        <nav class="container mx-auto p-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-bold text-white" id="home-link">Nel Ar Condicionados</a>
            <div class="flex items-center space-x-6">
                <a href="#products" class="text-blue-100 hover:text-white transition duration-300" id="products-link">Ver Produtos</a>
                <a href="#about" class="text-blue-100 hover:text-white transition duration-300" id="about-link">Sobre a Loja</a>
                <button id="cart-btn" class="text-blue-100 hover:text-white transition duration-300 relative">
                    <!-- Ícone do carrinho de compras -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
                    <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">0</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Conteúdo Principal Dinâmico -->
    <main class="container mx-auto py-8">
        <div id="content-area">
            <!-- O conteúdo da home, da página de produtos e de detalhes será injetado aqui pelo JavaScript -->
        </div>
    </main>

    <!-- Rodapé -->
    <footer class="bg-gray-800 text-white py-6 mt-16">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 Nel Ar Condicionados. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- JavaScript para a lógica de navegação e carrinho -->
    <script>
        // Array de objetos para armazenar os dados dos produtos
        const products = [
            {
                id: '1',
                name: 'Ar Condicionado Split',
                price: 1500.00,
                description: 'Ideal para climatizar ambientes amplos com eficiência e silêncio. Tecnologia inverter para economia de energia. Design moderno e elegante que se integra a qualquer decoração.',
                image: 'https://consul.vtexassets.com/arquivos/ids/243721/02_Consul_Ar_Split_CBK12CB_Imagem_Frontal.png?v=638762693385470000'
            },
            {
                id: '2',
                name: 'Refrigerador Side by Side',
                price: 3200.00,
                description: 'Espaço e tecnologia para conservar seus alimentos frescos no calor. Dispenser de água e gelo na porta. Sistema Frost-Free para nunca precisar descongelar.',
                image: 'https://a-static.mlcdn.com.br/1500x1500/geladeira-refrigerador-brastemp-frost-free-duplex-prata-447l-bre57fk/magazineluiza/238287600/f66e45fd9dcaf85c6da047ef25eb3696.jpg'
            },
            {
                id: '3',
                name: 'Frigobar Compacto',
                price: 650.00,
                description: 'Ideal para manter bebidas geladas no escritório, quarto ou sala de jogos. Design compacto, perfeito para pequenos espaços. Silencioso e econômico.',
                image: 'https://www.engageeletro.com.br/upload/produto/imagem/b_frigobar-compacto-preto-philco-porta-revers-vel-pfg50p-47-litros-1.webp'
            },
            {
                id: '4',
                name: 'Climatizador de Ar',
                price: 450.00,
                description: 'Opção portátil e econômica para refrescar o ambiente. Umidifica e purifica o ar, ideal para dias secos. Fácil de mover com rodinhas integradas.',
                image: 'https://t62533.vteximg.com.br/arquivos/ids/244745-1000-1000/climatizador-de-ar-industrial-elgin-big-air-45-litros-1.jpg?v=637917677358700000'
            },
            {
                id: '5',
                name: 'Máquina de Gelo',
                price: 890.00,
                description: 'Tenha gelo pronto a qualquer momento para suas bebidas de verão. Produção rápida e automática. Perfeita para festas e eventos.',
                image: 'https://www.dutramaquinas.com.br/shared/img/produto/alta/424021_maquina_de_gelo_12_kg_inox_ice_compact_emg04.webp'
            },
            {
                id: '6',
                name: 'Ventilador de Coluna',
                price: 250.00,
                description: 'Potente e silencioso, ideal para refrescar qualquer ambiente da casa. Ajustável em altura e oscilação. Três velocidades para o seu conforto.',
                image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrFX6blsNOYQzMzGLBvr2Js-1LnDAedy_cPw&s'
            },
            {
                id: '7',
                name: 'Ar Condicionado Janela',
                price: 1200.00,
                description: 'Modelo tradicional, robusto e de fácil instalação. Ideal para quem busca uma solução prática e durável. Grande capacidade de refrigeração.',
                image: 'https://www.frigelar.com.br/ccstore/v1/images/?source=/file/v6476556098240465854/products/KIT9395_1.jpg&height=300&width=300'
            },
            {
                id: '8',
                name: 'Mini Refrigerador Portátil',
                price: 350.00,
                description: 'Perfeito para viagens, carros ou para ter uma geladeira extra em casa. Leve e compacto, pode ser levado para qualquer lugar.',
                image: 'https://www.lojasebem.com.br/img/products/frigobar-geladeirinha-geladeira-refrigerador-hotel-71-litros-eos_1_1200.jpg'
            }
        ];

        // Array para armazenar as avaliações (simulação de um banco de dados)
        const reviews = [
            { productId: '1', reviewerName: 'João Silva', rating: 5, comment: 'Excelente ar condicionado, gela super rápido e é muito silencioso!' },
            { productId: '1', reviewerName: 'Maria Santos', rating: 4, comment: 'Bom produto, atendeu minhas expectativas. Poderia ser um pouco mais econômico.' },
            { productId: '4', reviewerName: 'Carlos Oliveira', rating: 5, comment: 'Ótimo climatizador, perfeito para o meu quarto!' },
            { productId: '2', reviewerName: 'Ana Souza', rating: 5, comment: 'Geladeira maravilhosa! Muito espaço e design lindo.' },
            { productId: '6', reviewerName: 'Pedro Costa', rating: 3, comment: 'O ventilador faz um pouco de barulho, mas ventila bem.' }
        ];

        const contentArea = document.getElementById('content-area');
        const cartCountSpan = document.getElementById('cart-count');
        const messageBox = document.getElementById('message-box');
        let cartItems = [];

        // Função para mostrar mensagens temporárias
        function showMessage(message) {
            messageBox.textContent = message;
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, 3000);
        }

        // Função para atualizar o contador do carrinho
        function updateCartCount() {
            cartCountSpan.textContent = cartItems.length;
        }

        // Função para adicionar produto ao carrinho
        function addToCart(product) {
            cartItems.push(product);
            updateCartCount();
            showMessage(`"${product.name}" foi adicionado ao carrinho!`);
        }
        
        // Função para remover um produto do carrinho
        function removeFromCart(productId) {
            const index = cartItems.findIndex(item => item.id === productId);
            if (index > -1) {
                const removedItem = cartItems.splice(index, 1);
                showMessage(`"${removedItem[0].name}" foi removido do carrinho.`);
                updateCartCount();
                renderCartPage(); // Re-renderiza a página do carrinho para atualizar a lista
            }
        }

        // Função para renderizar a página inicial (Home)
        function renderHomePage() {
            contentArea.innerHTML = `
                <h1 class="text-5xl font-extrabold text-center text-blue-800 mb-10">Conforto para o seu Verão</h1>
                <section id="products" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 px-4">
                    ${products.slice(0, 4).map(product => `
                        <div class="product-card p-6 flex flex-col items-center text-center" data-id="${product.id}">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-40 object-cover rounded-md mb-4">
                            <h2 class="text-xl font-semibold text-blue-700 mb-2">${product.name}</h2>
                            <p class="text-gray-500 text-sm mb-4">${product.description.split('.')[0]}</p>
                            <span class="text-2xl font-bold text-blue-600 mb-4">R$ ${product.price.toFixed(2).replace('.', ',')}</span>
                            <button class="add-to-cart bg-blue-500 text-white py-2 px-6 rounded-full font-semibold hover:bg-blue-600 transition duration-300" data-id="${product.id}">Adicionar ao Carrinho</button>
                        </div>
                    `).join('')}
                </section>
                <section id="about" class="mt-16 px-4">
                    <h2 class="text-4xl font-bold text-center text-blue-800 mb-6">Sobre Nós</h2>
                    <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                        <p class="text-gray-600 leading-relaxed max-w-2xl mx-auto">
                            Na Nel Ar Condicionados, nossa missão é levar o máximo de conforto para o seu verão. Especializados em soluções de refrigeração e climatização, oferecemos uma ampla gama de produtos, de ar-condicionados a frigobares, com a qualidade e o preço que você merece. Conte conosco para deixar seus dias mais frescos e agradáveis.
                        </p>
                    </div>
                </section>
            `;
            addEventListeners();
        }

        // Função para renderizar a página de todos os produtos
        function renderProductsPage() {
            contentArea.innerHTML = `
                <h1 class="text-5xl font-extrabold text-center text-blue-800 mb-10">Todos os Nossos Produtos</h1>
                <!-- Botão para voltar para a Home -->
                <div class="px-4 mb-8">
                    <button id="back-to-home" class="bg-gray-300 text-gray-800 py-2 px-6 rounded-full hover:bg-gray-400 transition duration-300">Voltar para a Página Inicial</button>
                </div>
                <section class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 px-4">
                    ${products.map(product => `
                        <div class="product-card p-6 flex flex-col items-center text-center" data-id="${product.id}">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-40 object-cover rounded-md mb-4">
                            <h2 class="text-xl font-semibold text-blue-700 mb-2">${product.name}</h2>
                            <p class="text-gray-500 text-sm mb-4">${product.description.split('.')[0]}</p>
                            <span class="text-2xl font-bold text-blue-600 mb-4">R$ ${product.price.toFixed(2).replace('.', ',')}</span>
                            <button class="add-to-cart bg-blue-500 text-white py-2 px-6 rounded-full font-semibold hover:bg-blue-600 transition duration-300" data-id="${product.id}">Adicionar ao Carrinho</button>
                        </div>
                    `).join('')}
                </section>
            `;
            addEventListeners();
        }
        
        // Função para renderizar a página de detalhes de um produto
        function renderProductDetails(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                renderHomePage();
                return;
            }

            // Encontrar as avaliações para o produto
            const productReviews = reviews.filter(r => r.productId === productId);
            const averageRating = productReviews.length > 0 ? (productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length).toFixed(1) : 'N/A';
            const reviewCount = productReviews.length;

            contentArea.innerHTML = `
                <div class="flex flex-col md:flex-row gap-8 bg-white rounded-xl shadow-lg p-8">
                    <div class="md:w-1/2">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-auto object-cover rounded-xl shadow-md">
                    </div>
                    <div class="md:w-1/2 flex flex-col justify-center text-center md:text-left">
                        <h1 class="text-4xl font-bold text-blue-800 mb-4">${product.name}</h1>
                        <p class="text-gray-700 text-lg mb-6">${product.description}</p>
                        <span class="text-4xl font-extrabold text-blue-600 mb-6">R$ ${product.price.toFixed(2).replace('.', ',')}</span>
                        <button class="add-to-cart bg-blue-500 text-white py-3 px-8 rounded-full font-semibold text-lg hover:bg-blue-600 transition duration-300" data-id="${product.id}">Adicionar ao Carrinho</button>
                    </div>
                </div>
                <div class="mt-8">
                    <button id="back-to-products" class="bg-gray-300 text-gray-800 py-2 px-6 rounded-full hover:bg-gray-400 transition duration-300">Voltar para Produtos</button>
                </div>

                <!-- Seção de Avaliações -->
                <section class="mt-12 p-8 bg-white rounded-xl shadow-lg">
                    <h2 class="text-3xl font-bold text-blue-800 mb-6">Avaliações de Clientes</h2>
                    <div class="flex items-center gap-4 mb-6">
                        <div class="star-rating">
                            ${Array.from({ length: 5 }, (_, i) => `
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="${i < Math.round(averageRating) ? '#f59e0b' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                            `).join('')}
                        </div>
                        <span class="text-lg text-gray-700 font-semibold">${averageRating} de 5 (${reviewCount} avaliações)</span>
                    </div>

                    <!-- Formulário para nova avaliação -->
                    <form id="review-form" class="bg-gray-50 p-6 rounded-md mb-8">
                        <h3 class="text-xl font-semibold text-blue-700 mb-4">Deixe a sua avaliação</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 font-medium mb-2">Seu nome</label>
                            <input type="text" id="reviewer-name" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" placeholder="Digite seu nome" required>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 font-medium mb-2">Sua nota</label>
                            <div class="star-rating" id="star-rating-input">
                                ${Array.from({ length: 5 }, (_, i) => `
                                    <svg xmlns="http://www.w3.org/2000/svg" data-rating="${i + 1}" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                                `).join('')}
                            </div>
                            <input type="hidden" id="review-rating" required>
                        </div>
                        <div class="mb-6">
                            <label class="block text-gray-700 font-medium mb-2">Seu comentário</label>
                            <textarea id="review-comment" rows="4" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" placeholder="Escreva sua opinião..." required></textarea>
                        </div>
                        <button type="submit" class="w-full bg-blue-500 text-white py-2 px-4 rounded-full font-semibold hover:bg-blue-600 transition duration-300">Enviar Avaliação</button>
                    </form>

                    <!-- Lista de avaliações existentes -->
                    <div id="reviews-container" class="space-y-6">
                        <!-- Avaliações serão injetadas aqui pelo JS -->
                    </div>
                </section>
            `;
            addEventListeners();
            renderReviews(productId);
        }

        // Função para renderizar a página do carrinho
        function renderCartPage() {
            const total = cartItems.reduce((acc, item) => acc + item.price, 0).toFixed(2).replace('.', ',');

            contentArea.innerHTML = `
                <h1 class="text-5xl font-extrabold text-center text-blue-800 mb-10">Seu Carrinho</h1>
                <div class="bg-white rounded-xl shadow-lg p-8">
                    ${cartItems.length > 0 ? `
                        <div class="space-y-6 mb-8">
                            ${cartItems.map(item => `
                                <div class="flex items-center gap-4 border-b border-gray-200 pb-4 last:border-b-0">
                                    <img src="${item.image}" alt="${item.name}" class="w-20 h-20 object-cover rounded-md shadow-sm">
                                    <div class="flex-grow">
                                        <h3 class="text-xl font-semibold text-blue-700">${item.name}</h3>
                                        <p class="text-gray-500">R$ ${item.price.toFixed(2).replace('.', ',')}</p>
                                    </div>
                                    <button class="remove-from-cart text-red-500 hover:text-red-700 transition duration-300" data-id="${item.id}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                        <div class="flex flex-col md:flex-row justify-between items-center border-t border-gray-300 pt-6">
                            <span class="text-2xl font-bold text-blue-800 mb-4 md:mb-0">Total: R$ ${total}</span>
                            <div class="flex space-x-4">
                                <button id="continue-shopping" class="bg-gray-300 text-gray-800 py-2 px-6 rounded-full font-semibold hover:bg-gray-400 transition duration-300">Continuar Comprando</button>
                                <button id="proceed-to-checkout-btn" class="bg-blue-500 text-white py-2 px-6 rounded-full font-semibold hover:bg-blue-600 transition duration-300">Finalizar Compra</button>
                            </div>
                        </div>
                    ` : `
                        <div class="text-center py-12">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-bag mx-auto text-gray-400 mb-4"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" x2="21" y1="6" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
                            <p class="text-2xl text-gray-600 font-medium mb-4">Seu carrinho está vazio.</p>
                            <button id="back-to-products" class="bg-blue-500 text-white py-2 px-6 rounded-full font-semibold hover:bg-blue-600 transition duration-300">Ver Produtos</button>
                        </div>
                    `}
                </div>
            `;
            addEventListeners();
        }

        // Função para renderizar a página de checkout com o formulário
        function renderCheckoutPage() {
            if (cartItems.length === 0) {
                showMessage("Seu carrinho está vazio. Adicione itens antes de finalizar a compra.");
                renderHomePage();
                return;
            }

            const total = cartItems.reduce((acc, item) => acc + item.price, 0).toFixed(2).replace('.', ',');

            contentArea.innerHTML = `
                <h1 class="text-5xl font-extrabold text-center text-blue-800 mb-10">Finalizar Compra</h1>
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <p class="text-center text-lg font-bold text-blue-800 mb-6">Total a Pagar: R$ ${total}</p>
                    <form id="checkout-form" class="space-y-6">
                        <!-- Seção de Endereço -->
                        <div>
                            <h2 class="text-2xl font-bold text-blue-700 mb-4">Informações de Envio</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="address" class="block text-gray-700 font-medium mb-2">Endereço Completo</label>
                                    <input type="text" id="address" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" required>
                                </div>
                                <div>
                                    <label for="zip-code" class="block text-gray-700 font-medium mb-2">CEP</label>
                                    <input type="text" id="zip-code" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" required>
                                </div>
                            </div>
                        </div>

                        <!-- Seção de Pagamento -->
                        <div>
                            <h2 class="text-2xl font-bold text-blue-700 mb-4">Informações de Pagamento</h2>
                            <div class="space-y-4">
                                <div>
                                    <label for="card-name" class="block text-gray-700 font-medium mb-2">Nome no Cartão</label>
                                    <input type="text" id="card-name" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" required>
                                </div>
                                <div>
                                    <label for="card-number" class="block text-gray-700 font-medium mb-2">Número do Cartão</label>
                                    <input type="text" id="card-number" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" required>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="expiry-date" class="block text-gray-700 font-medium mb-2">Data de Validade (MM/AA)</label>
                                        <input type="text" id="expiry-date" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" placeholder="MM/AA" required>
                                    </div>
                                    <div>
                                        <label for="cvv" class="block text-gray-700 font-medium mb-2">CVV</label>
                                        <input type="text" id="cvv" class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Botões de Ação -->
                        <div class="flex flex-col md:flex-row justify-between items-center pt-6">
                            <button type="button" id="back-to-cart-btn" class="bg-gray-300 text-gray-800 py-2 px-6 rounded-full font-semibold hover:bg-gray-400 transition duration-300 mb-4 md:mb-0">Voltar para o Carrinho</button>
                            <button type="submit" class="bg-blue-500 text-white py-2 px-6 rounded-full font-semibold hover:bg-blue-600 transition duration-300">Finalizar Compra</button>
                        </div>
                    </form>
                </div>
            `;
            addEventListeners();
        }

        // Função para simular a finalização da compra após o preenchimento do formulário
        function finalizePurchase() {
            // Lógica de finalização de compra (real, seria aqui que se enviaria os dados para um servidor)
            const total = cartItems.reduce((acc, item) => acc + item.price, 0);
            showMessage(`Compra finalizada com sucesso! Valor total: R$ ${total.toFixed(2).replace('.', ',')}.`);
            cartItems = []; // Esvazia o carrinho
            updateCartCount();
            renderHomePage(); // Redireciona para a página inicial
        }

        // Função para renderizar as avaliações de um produto específico
        function renderReviews(productId) {
            const reviewsContainer = document.getElementById('reviews-container');
            const productReviews = reviews.filter(r => r.productId === productId);
            reviewsContainer.innerHTML = '';

            if (productReviews.length === 0) {
                reviewsContainer.innerHTML = '<p class="text-center text-gray-500">Nenhuma avaliação ainda. Seja o primeiro a avaliar!</p>';
                return;
            }

            productReviews.forEach(review => {
                const reviewElement = document.createElement('div');
                reviewElement.className = 'bg-gray-100 p-6 rounded-lg border border-gray-200';
                reviewElement.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center">
                            <h4 class="font-semibold text-blue-900">${review.reviewerName}</h4>
                        </div>
                        <div class="star-rating flex items-center gap-1">
                            ${Array.from({ length: 5 }, (_, i) => `
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="${i < review.rating ? '#f59e0b' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                            `).join('')}
                        </div>
                    </div>
                    <p class="text-gray-600 leading-relaxed">${review.comment}</p>
                `;
                reviewsContainer.appendChild(reviewElement);
            });
        }
        
        // Adiciona event listeners dinamicamente após o conteúdo ser renderizado
        function addEventListeners() {
            // Event listener para os botões "Adicionar ao Carrinho"
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (event) => {
                    const productId = event.currentTarget.getAttribute('data-id');
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        addToCart(product);
                    }
                });
            });

            // Event listener para os cards de produtos para abrir a página de detalhes
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', (event) => {
                    // Evita que o clique no botão "Adicionar ao Carrinho" acione o evento do card
                    if (event.target.tagName.toLowerCase() === 'button') {
                        return;
                    }
                    const productId = card.getAttribute('data-id');
                    renderProductDetails(productId);
                });
            });

            // Event listener para o botão "Voltar para Produtos"
            const backToProductsBtn = document.getElementById('back-to-products');
            if (backToProductsBtn) {
                backToProductsBtn.addEventListener('click', renderProductsPage);
            }

            // Event listener para o novo botão "Voltar para a Home"
            const backToHomeBtn = document.getElementById('back-to-home');
            if (backToHomeBtn) {
                backToHomeBtn.addEventListener('click', renderHomePage);
            }

            // Event listeners para o formulário de avaliação
            const reviewForm = document.getElementById('review-form');
            if (reviewForm) {
                // Lógica para a seleção de estrelas
                let selectedRating = 0;
                const starInputContainer = document.getElementById('star-rating-input');
                const ratingInput = document.getElementById('review-rating');

                starInputContainer.addEventListener('click', (event) => {
                    const star = event.target.closest('.star');
                    if (star) {
                        selectedRating = parseInt(star.getAttribute('data-rating'));
                        ratingInput.value = selectedRating;
                        updateStarDisplay(starInputContainer, selectedRating);
                    }
                });

                // Atualiza a exibição das estrelas preenchidas
                function updateStarDisplay(container, rating) {
                    container.querySelectorAll('.star').forEach(star => {
                        const starRating = parseInt(star.getAttribute('data-rating'));
                        if (starRating <= rating) {
                            star.classList.add('filled');
                        } else {
                            star.classList.remove('filled');
                        }
                    });
                }

                // Lógica de submissão do formulário
                reviewForm.addEventListener('submit', (event) => {
                    event.preventDefault();
                    const reviewerName = document.getElementById('reviewer-name').value;
                    const comment = document.getElementById('review-comment').value;
                    const rating = parseInt(ratingInput.value);

                    // Pega o ID do produto atual (do URL, se estivéssemos usando um router)
                    const currentProductId = window.location.hash.substring(window.location.hash.indexOf('=') + 1);

                    if (reviewerName && comment && rating) {
                        reviews.push({
                            productId: currentProductId,
                            reviewerName,
                            rating,
                            comment
                        });
                        showMessage("Sua avaliação foi enviada com sucesso!");
                        reviewForm.reset();
                        ratingInput.value = '';
                        updateStarDisplay(starInputContainer, 0); // Limpa as estrelas
                        renderReviews(currentProductId);
                    } else {
                        showMessage("Por favor, preencha todos os campos.");
                    }
                });
            }

            // Event listeners para a página do carrinho
            const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');
            if (proceedToCheckoutBtn) {
                proceedToCheckoutBtn.addEventListener('click', renderCheckoutPage);
            }
            
            const continueShoppingBtn = document.getElementById('continue-shopping');
            if (continueShoppingBtn) {
                continueShoppingBtn.addEventListener('click', renderProductsPage);
            }

            document.querySelectorAll('.remove-from-cart').forEach(button => {
                button.addEventListener('click', (event) => {
                    const productId = event.currentTarget.getAttribute('data-id');
                    removeFromCart(productId);
                });
            });

            // Event listener para a página de checkout
            const checkoutForm = document.getElementById('checkout-form');
            if (checkoutForm) {
                checkoutForm.addEventListener('submit', (event) => {
                    event.preventDefault();
                    // Validação simples dos campos
                    const address = document.getElementById('address').value;
                    const zipCode = document.getElementById('zip-code').value;
                    const cardNumber = document.getElementById('card-number').value;
                    if (address && zipCode && cardNumber) {
                        finalizePurchase();
                    } else {
                        showMessage("Por favor, preencha todos os campos do formulário.");
                    }
                });

                const backToCartBtn = document.getElementById('back-to-cart-btn');
                backToCartBtn.addEventListener('click', renderCartPage);
            }
        }
        
        // Adiciona event listeners para o menu principal
        document.getElementById('home-link').addEventListener('click', (event) => {
            event.preventDefault();
            renderHomePage();
        });

        document.getElementById('products-link').addEventListener('click', (event) => {
            event.preventDefault();
            renderProductsPage();
        });

        // Event listener para o link "Sobre a Loja"
        document.getElementById('about-link').addEventListener('click', (event) => {
            event.preventDefault();
            // Primeiro, renderiza a página inicial
            renderHomePage();
            // Em seguida, rola a tela para a seção "Sobre Nós"
            setTimeout(() => {
                const aboutSection = document.getElementById('about');
                if (aboutSection) {
                    aboutSection.scrollIntoView({ behavior: 'smooth' });
                }
            }, 100); // Pequeno atraso para garantir que a seção foi renderizada
        });

        document.getElementById('cart-btn').addEventListener('click', () => {
            renderCartPage();
        });

        // Inicia a aplicação na página inicial
        renderHomePage();
    </script>
</body>
</html>
